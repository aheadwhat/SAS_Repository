%macro get_head_tail(dsname = , var = , num = , out = var_list, pattern = head);
   %if &pattern = head or &pattern = first %then %do;
      %global &out;
      proc sql outobs = &num;
         select &var into: &out separated by ' ' from &dsname;
      quit;
      %put the first &num values of "&var" in "&dsname" is &&&out, result is saved in "&out";      
   %end;
   %else %if &pattern = tail or &pattern = last %then %do;
      data _null_;
         if _n_ = 0 then set &dsname nobs = obs_cnt;
         call symputx('obs_cnt', obs_cnt);
      run; 
      proc sql;
         select &var into: &out separated by ' ' from &dsname(firstobs = %eval(&obs_cnt - &num + 1) obs = &obs_cnt);
      quit;
       %put the first &num values of "&var" in "&dsname" is &&&out, result is saved in "&out";     
   %end;
   %else %do;
      %put pattern INVALID!;
      %abort;
   %end;
%mend;
